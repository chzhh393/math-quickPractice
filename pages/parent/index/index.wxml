<view class="container">
  <view class="header">
    <view class="avatar-container">
      <image class="avatar" src="/assets/parent_avatar.png" mode="aspectFill"></image>
    </view>
    <view class="greeting">
      <view class="greeting-text">ä½ å¥½ï¼Œå®¶é•¿</view>
      <view class="greeting-subtext">æŸ¥çœ‹å­©å­çš„å­¦ä¹ æƒ…å†µ</view>
    </view>
  </view>

  <view class="main-content">
    <view class="section-title">å­¦ä¹ ä»»åŠ¡</view>
    
    <block wx:if="{{loading}}">
      <view class="loading">åŠ è½½ä¸­...</view>
    </block>
    
    <block wx:elif="{{errorMessage}}">
      <view class="error-message">
        <view class="error-icon">âŒ</view>
        <view class="error-text">{{errorMessage}}</view>
      </view>
    </block>
    
    <block wx:elif="{{tasks && tasks.length > 0}}">
      <view class="tasks-list">
        <block wx:for="{{tasks}}" wx:key="id">
          <view class="task-card" bindtap="viewTaskReport" data-task-id="{{item.id}}">
            <view class="task-header">
              <view class="task-title">{{item.title}}</view>
              <view class="task-status {{item.status === 'å·²å®Œæˆ' ? 'completed' : item.status === 'è¿›è¡Œä¸­' ? 'in-progress' : ''}}">
                {{item.status}}
              </view>
            </view>
            
            <view class="task-info">
              <view class="task-problems">
                <text class="info-label">é¢˜ç›®æ•°é‡:</text>
                <text class="info-value">{{item.problemCount}}</text>
              </view>
              <view class="task-date">
                <text class="info-label">åˆ›å»ºæ—¶é—´:</text>
                <text class="info-value">{{formatTime(item.createTime)}}</text>
              </view>
            </view>
            
            <view class="task-progress">
              <view class="progress-bar">
                <view class="progress-fill" style="width: {{item.progress}}%;"></view>
              </view>
              <view class="progress-text">å®Œæˆè¿›åº¦: {{item.progress}}%</view>
            </view>
            
            <view class="task-action">
              <view class="action-button">æŸ¥çœ‹æŠ¥å‘Š</view>
            </view>
          </view>
        </block>
      </view>
    </block>
    
    <block wx:else>
      <view class="empty-tasks">
        <view class="empty-icon">ğŸ“š</view>
        <view class="empty-text">æš‚æ— å­¦ä¹ ä»»åŠ¡</view>
        <view class="empty-subtext">å­©å­å®Œæˆä»»åŠ¡åå°†åœ¨è¿™é‡Œæ˜¾ç¤º</view>
      </view>
    </block>
  </view>
</view> 

